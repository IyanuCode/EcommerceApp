2025-09-20 10:28:02.272 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 10:28:02.602 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 10:28:02.609 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 10:28:02.613 +01:00 [INF] Hosting environment: Development
2025-09-20 10:28:02.616 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api
2025-09-20 10:30:46.131 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 51
2025-09-20 10:30:46.398 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 10:30:47.362 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 9:30:47 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 10:30:47.488 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 9:30:47 AM'.
2025-09-20 10:30:47.639 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 10:30:47.761 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 10:30:47.798 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 11.8824ms
2025-09-20 10:30:47.821 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 10:30:47.833 +01:00 [ERR] An error occurred.
System.InvalidOperationException: Unable to resolve service for type 'Ecommerce.Data.Interfaces.IAuthServices.IAuthServiceRepository' while attempting to activate 'Ecommerce.Api.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 10:30:48.990 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 500 null application/json; charset=utf-8 2868.1726ms
2025-09-20 11:17:21.143 +01:00 [INF] Application is shutting down...
2025-09-20 11:18:01.403 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 11:18:02.821 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 11:18:02.846 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:18:02.860 +01:00 [INF] Hosting environment: Development
2025-09-20 11:18:02.870 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api
2025-09-20 11:19:10.025 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 11:19:12.847 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 2830.6667ms
2025-09-20 11:19:15.553 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 11:19:16.033 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 481.0356ms
2025-09-20 11:20:00.836 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 75
2025-09-20 11:20:00.950 +01:00 [INF] CORS policy execution failed.
2025-09-20 11:20:00.958 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 11:20:01.095 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 11:20:01.230 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:20:01.355 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:20:01.410 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 14.8991ms
2025-09-20 11:20:01.425 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:20:01.437 +01:00 [ERR] An error occurred.
System.InvalidOperationException: Unable to resolve service for type 'Ecommerce.Data.Interfaces.IAuthServices.IAuthServiceRepository' while attempting to activate 'Ecommerce.Api.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 11:20:01.634 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 500 null application/json; charset=utf-8 798.2465ms
2025-09-20 11:26:18.970 +01:00 [INF] Application is shutting down...
2025-09-20 11:26:45.256 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 11:26:45.685 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 11:26:45.694 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:26:45.700 +01:00 [INF] Hosting environment: Development
2025-09-20 11:26:45.703 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api
2025-09-20 11:32:03.669 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 11:32:04.838 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 1170.8934ms
2025-09-20 11:32:05.429 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 11:32:05.811 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 382.6061ms
2025-09-20 11:32:42.094 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 71
2025-09-20 11:32:42.169 +01:00 [INF] CORS policy execution failed.
2025-09-20 11:32:42.177 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 11:32:42.193 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 11:32:42.390 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:32:43.906 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:32:58.432 +01:00 [INF] Executed DbCommand (135ms) [Parameters=[@__ToLower_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE lower(u."Username") = @__ToLower_0)
2025-09-20 11:32:59.267 +01:00 [ERR] Failed executing DbCommand (35ms) [Parameters=[@p0='?', @p1='?', @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "PasswordHash", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-09-20 11:32:59.377 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'Ecommerce.Data.Data.EcommerceStoreDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "Email" of relation "Users" does not exist

POSITION: 22
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "Email" of relation "Users" does not exist
    Position: 22
    File: parse_target.c
    Line: 1070
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "Email" of relation "Users" does not exist

POSITION: 22
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "Email" of relation "Users" does not exist
    Position: 22
    File: parse_target.c
    Line: 1070
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-20 11:32:59.461 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 15535.2374ms
2025-09-20 11:32:59.467 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:32:59.476 +01:00 [ERR] An error occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "Email" of relation "Users" does not exist

POSITION: 22
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "Email" of relation "Users" does not exist
    Position: 22
    File: parse_target.c
    Line: 1070
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.CreateUserAsync(User user, String password) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 121
   at Ecommerce.Api.Controllers.AuthController.Register(RegisterRequestDto registerRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api\Controllers\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 11:32:59.671 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 500 null application/json; charset=utf-8 17576.8239ms
2025-09-20 11:36:58.143 +01:00 [INF] Application is shutting down...
2025-09-20 11:48:16.981 +01:00 [INF] Executed DbCommand (959ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-20 11:48:20.982 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-09-20 11:48:21.106 +01:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-20 11:48:21.118 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-09-20 11:48:21.125 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-20 11:48:21.153 +01:00 [INF] Applying migration '20250920104458_IncludingPassword'.
2025-09-20 11:48:21.305 +01:00 [INF] Executed DbCommand (137ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Users" ADD "Email" text NOT NULL DEFAULT '';
2025-09-20 11:48:21.332 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250920104458_IncludingPassword', '9.0.9');
2025-09-20 11:50:34.303 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 11:50:35.088 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 11:50:35.094 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:50:35.099 +01:00 [INF] Hosting environment: Development
2025-09-20 11:50:35.103 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api
2025-09-20 11:52:08.124 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 11:52:08.492 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 372.7056ms
2025-09-20 11:52:09.695 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 11:52:10.965 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1269.9938ms
2025-09-20 11:52:57.862 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 73
2025-09-20 11:52:57.905 +01:00 [INF] CORS policy execution failed.
2025-09-20 11:52:57.910 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 11:52:57.923 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 11:52:58.051 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:52:58.189 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:53:03.914 +01:00 [INF] Executed DbCommand (223ms) [Parameters=[@__ToLower_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE lower(u."Username") = @__ToLower_0)
2025-09-20 11:53:05.173 +01:00 [INF] Executed DbCommand (567ms) [Parameters=[@p0='?', @p1='?', @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "PasswordHash", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-09-20 11:53:05.354 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 11:53:05.523 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 7305.9785ms
2025-09-20 11:53:05.536 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:53:05.578 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 200 null application/json; charset=utf-8 7716.4183ms
2025-09-20 11:53:55.387 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 84
2025-09-20 11:53:55.536 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:53:55 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 11:53:55.568 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:53:55 AM'.
2025-09-20 11:53:55.573 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:53:55.578 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:53:55.654 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE lower(u."Username") = @__ToLower_0)
2025-09-20 11:53:57.112 +01:00 [INF] Executed DbCommand (1,094ms) [Parameters=[@p0='?', @p1='?', @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "PasswordHash", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-09-20 11:53:57.139 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 11:53:57.155 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 1568.2341ms
2025-09-20 11:53:57.167 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 11:53:57.179 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 200 null application/json; charset=utf-8 1791.0876ms
2025-09-20 11:59:06.500 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 84
2025-09-20 11:59:06.517 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:59:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 11:59:06.526 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:59:06 AM'.
2025-09-20 11:59:06.531 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 11:59:06.567 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:59:07.776 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 11:59:07.862 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-09-20 11:59:07.874 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 1298.9936ms
2025-09-20 11:59:07.885 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 11:59:07.895 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 401 null text/plain; charset=utf-8 1395.2034ms
2025-09-20 11:59:20.125 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 56
2025-09-20 11:59:20.133 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:59:20 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 11:59:20.140 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 10:59:20 AM'.
2025-09-20 11:59:20.144 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 11:59:20.150 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 11:59:20.163 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 11:59:20.173 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-09-20 11:59:20.178 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 20.1259ms
2025-09-20 11:59:20.184 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 11:59:20.188 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 401 null text/plain; charset=utf-8 63.3406ms
2025-09-20 12:00:08.214 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 12:00:08.226 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 12.2361ms
2025-09-20 12:00:08.682 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 12:00:08.737 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.3449ms
2025-09-20 12:00:36.109 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 47
2025-09-20 12:00:36.119 +01:00 [INF] CORS policy execution failed.
2025-09-20 12:00:36.123 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 12:00:36.129 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:00:36.134 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:00:36.147 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:00:36.157 +01:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-09-20 12:00:36.162 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 19.3578ms
2025-09-20 12:00:36.168 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:00:36.173 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 401 null text/plain; charset=utf-8 64.023ms
2025-09-20 12:02:26.196 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/register - application/json 80
2025-09-20 12:02:26.205 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:02:26 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 12:02:26.214 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:02:26 AM'.
2025-09-20 12:02:26.218 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 12:02:26.221 +01:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Ecommerce.Api.DTOs.AuthDto.RegisterRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:02:26.231 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS u
    WHERE lower(u."Username") = @__ToLower_0)
2025-09-20 12:02:26.460 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?', @p1='?', @p2='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "PasswordHash", "Username")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2025-09-20 12:02:26.470 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-20 12:02:26.476 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api) in 249.2156ms
2025-09-20 12:02:26.490 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Register (Ecommerce.Api)'
2025-09-20 12:02:26.498 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/register - 200 null application/json; charset=utf-8 301.5614ms
2025-09-20 12:02:54.194 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:02:54.210 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:02:54 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 12:02:54.222 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:02:54 AM'.
2025-09-20 12:02:54.228 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:02:54.234 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:02:54.249 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:02:54.585 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 341.7817ms
2025-09-20 12:02:54.592 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:02:54.598 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:02:54.700 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 506.1603ms
2025-09-20 12:03:04.467 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:03:04.478 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:03:04 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 12:03:04.487 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:03:04 AM'.
2025-09-20 12:03:04.492 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:03:04.496 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:03:04.507 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:03:04.727 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 224.1434ms
2025-09-20 12:03:04.734 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:03:04.740 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:03:04.768 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 300.724ms
2025-09-20 12:03:42.455 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 49
2025-09-20 12:03:42.470 +01:00 [INF] CORS policy execution failed.
2025-09-20 12:03:42.476 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 12:03:42.482 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:03:42.489 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:03:42.536 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:03:42.982 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 457.1867ms
2025-09-20 12:03:42.994 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:03:43.005 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:03:43.055 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 600.5672ms
2025-09-20 12:05:41.291 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 49
2025-09-20 12:05:41.310 +01:00 [INF] CORS policy execution failed.
2025-09-20 12:05:41.317 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 12:05:41.325 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:05:41.334 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:05:41.575 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:05:41.929 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 580.2312ms
2025-09-20 12:05:41.934 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:05:41.938 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:05:41.957 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 666.4299ms
2025-09-20 12:11:27.428 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 49
2025-09-20 12:11:27.438 +01:00 [INF] CORS policy execution failed.
2025-09-20 12:11:27.442 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 12:11:27.447 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:11:27.454 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:11:27.581 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:11:27.916 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 452.2234ms
2025-09-20 12:11:27.925 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:11:27.934 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.UTF8Encoding.UTF8EncodingSealed.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:11:27.979 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 551.0086ms
2025-09-20 12:11:40.472 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 12:11:40.482 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 9.9338ms
2025-09-20 12:11:42.013 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 12:11:42.043 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.7851ms
2025-09-20 12:11:57.577 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:11:57.584 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:11:57 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 12:11:57.592 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:11:57 AM'.
2025-09-20 12:11:57.597 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:11:57.602 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:11:57.613 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:11:57.811 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 201.8511ms
2025-09-20 12:11:57.817 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:11:57.822 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.UTF8Encoding.UTF8EncodingSealed.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:11:57.841 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 264.4327ms
2025-09-20 12:13:32.665 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:13:32.678 +01:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:13:32 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-20 12:13:32.689 +01:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/27/2024 3:33:20 AM', Current time (UTC): '9/20/2025 11:13:32 AM'.
2025-09-20 12:13:32.694 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:13:32.699 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:13:32.718 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:13:33.064 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 353.3339ms
2025-09-20 12:13:33.068 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:13:33.071 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.UTF8Encoding.UTF8EncodingSealed.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:13:33.117 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 452.185ms
2025-09-20 12:26:11.176 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:26:11.187 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:26:11.192 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 12:26:11.334 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 12:26:11.529 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 329.8147ms
2025-09-20 12:26:11.535 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 12:26:11.539 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.UTF8Encoding.UTF8EncodingSealed.GetBytes(String s)
   at Ecommerce.Data.Repositories.AuthService.AuthServiceRepository.GenerateAccessToken(User user) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.Data\Repositories\AuthService\AuthServiceRepository.cs:line 59
   at Ecommerce.Api.Controllers.AuthController.Login(LoginRequestDto loginRequest) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Controllers\AuthController.cs:line 48
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:26:11.560 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 383.84ms
2025-09-20 12:27:51.647 +01:00 [INF] Application is shutting down...
2025-09-20 12:28:19.921 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 12:28:21.653 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 12:28:21.661 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:28:21.665 +01:00 [INF] Hosting environment: Development
2025-09-20 12:28:21.667 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api
2025-09-20 12:28:53.158 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:28:53.541 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 12:28:53.997 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__2(JwtBearerOptions Options) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Program.cs:line 68
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c.<Get>b__10_0(String name, IOptionsFactory`1 factory)
   at Microsoft.Extensions.Options.OptionsCache`1.<>c__DisplayClass3_1`1.<GetOrAdd>b__2()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:28:54.482 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 1315.6796ms
2025-09-20 12:36:21.907 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 12:36:22.282 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 375.8123ms
2025-09-20 12:36:23.365 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 12:36:23.682 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.5366ms
2025-09-20 12:36:29.240 +01:00 [INF] Application is shutting down...
2025-09-20 12:36:59.124 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 12:36:59.436 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 12:36:59.443 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:36:59.446 +01:00 [INF] Hosting environment: Development
2025-09-20 12:36:59.449 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api
2025-09-20 12:37:30.114 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 50
2025-09-20 12:37:30.267 +01:00 [INF] CORS policy execution failed.
2025-09-20 12:37:30.272 +01:00 [INF] Request origin http://localhost:5239 does not have permission to access the resource.
2025-09-20 12:37:30.283 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 12:37:30.329 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__2(JwtBearerOptions Options) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Program.cs:line 68
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c.<Get>b__10_0(String name, IOptionsFactory`1 factory)
   at Microsoft.Extensions.Options.OptionsCache`1.<>c__DisplayClass3_1`1.<GetOrAdd>b__2()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:37:30.767 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 647.1183ms
2025-09-20 12:39:18.107 +01:00 [INF] Application is shutting down...
2025-09-20 12:39:30.626 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 12:39:30.875 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 12:39:30.883 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:39:30.886 +01:00 [INF] Hosting environment: Development
2025-09-20 12:39:30.889 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api
2025-09-20 12:39:59.732 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 12:39:59.844 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 12:39:59.879 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__2(JwtBearerOptions Options) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Program.cs:line 68
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c.<Get>b__10_0(String name, IOptionsFactory`1 factory)
   at Microsoft.Extensions.Options.OptionsCache`1.<>c__DisplayClass3_1`1.<GetOrAdd>b__2()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:40:00.141 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 412.7508ms
2025-09-20 12:40:54.661 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 50
2025-09-20 12:40:54.686 +01:00 [INF] CORS policy execution successful.
2025-09-20 12:40:54.703 +01:00 [ERR] An error occurred.
System.ArgumentNullException: Value cannot be null. (Parameter 's')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Text.Encoding.GetBytes(String s)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__2(JwtBearerOptions Options) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\Program.cs:line 68
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c.<Get>b__10_0(String name, IOptionsFactory`1 factory)
   at Microsoft.Extensions.Options.OptionsCache`1.<>c__DisplayClass3_1`1.<GetOrAdd>b__2()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd[TArg](String name, Func`3 createOptions, TArg factoryArgument)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ecommerce.Api.MiddleWares.ErrorHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api\MiddleWares\ErrorHandlingMiddleware.cs:line 19
2025-09-20 12:40:54.740 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 500 null application/json; charset=utf-8 80.1133ms
2025-09-20 12:59:03.364 +01:00 [INF] Application is shutting down...
2025-09-20 12:59:27.774 +01:00 [INF] User profile is available. Using 'C:\Users\Iyanu\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-20 12:59:28.315 +01:00 [INF] Now listening on: http://localhost:5239
2025-09-20 12:59:28.428 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:59:28.503 +01:00 [INF] Hosting environment: Development
2025-09-20 12:59:28.529 +01:00 [INF] Content root path: C:\Users\Iyanu\ApiProject\EcommerceApp\Ecommerce.api
2025-09-20 13:00:31.194 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/index.html - null null
2025-09-20 13:00:31.770 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/index.html - 200 null text/html;charset=utf-8 584.1199ms
2025-09-20 13:00:33.312 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - null null
2025-09-20 13:00:33.829 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5239/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 516.8291ms
2025-09-20 13:01:24.578 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 50
2025-09-20 13:01:24.627 +01:00 [INF] CORS policy execution successful.
2025-09-20 13:01:24.636 +01:00 [WRN] Failed to determine the https port for redirect.
2025-09-20 13:01:24.982 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 13:01:25.147 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 13:01:44.514 +01:00 [INF] Executed DbCommand (2,681ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 13:01:50.914 +01:00 [INF] Executed DbCommand (163ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("Expires", "IsRevoked", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2025-09-20 13:01:52.298 +01:00 [INF] Executing OkObjectResult, writing value of type 'Ecommerce.Api.DTOs.AuthDto.LoginResponseDto'.
2025-09-20 13:01:52.332 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 27157.0427ms
2025-09-20 13:01:52.337 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 13:01:52.357 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 200 null application/json; charset=utf-8 27778.6953ms
2025-09-20 13:02:24.341 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5239/api/Auth/login - application/json 54
2025-09-20 13:02:24.359 +01:00 [INF] Executing endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 13:02:24.365 +01:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Ecommerce.Api.DTOs.AuthDto.LoginRequestDto) on controller Ecommerce.Api.Controllers.AuthController (Ecommerce.Api).
2025-09-20 13:02:24.454 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."PasswordHash", u."Username"
FROM "Users" AS u
WHERE lower(u."Username") = @__username_0
LIMIT 1
2025-09-20 13:02:24.819 +01:00 [INF] Executed DbCommand (131ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Boolean), @p2='?', @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RefreshTokens" ("Expires", "IsRevoked", "Token", "UserId")
VALUES (@p0, @p1, @p2, @p3)
RETURNING "Id";
2025-09-20 13:02:24.847 +01:00 [INF] Executing OkObjectResult, writing value of type 'Ecommerce.Api.DTOs.AuthDto.LoginResponseDto'.
2025-09-20 13:02:24.861 +01:00 [INF] Executed action Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api) in 488.3418ms
2025-09-20 13:02:24.875 +01:00 [INF] Executed endpoint 'Ecommerce.Api.Controllers.AuthController.Login (Ecommerce.Api)'
2025-09-20 13:02:24.885 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5239/api/Auth/login - 200 null application/json; charset=utf-8 544.2573ms
